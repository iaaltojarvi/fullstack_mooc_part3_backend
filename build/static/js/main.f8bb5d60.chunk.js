(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},22:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(15),c=t.n(o),u=(t(22),t(2)),s=t(3),i=t.n(s),l="/api/persons",m=function(){return i.a.get(l).then((function(e){return e.data}))},f=function(e){return i.a.post(l,e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},b=t(5),g=function(e){var n=e.persons,t=e.setPersons,a=e.setMessage,o=e.setShowMessage;return r.a.createElement(r.a.Fragment,null,n&&n.map((function(e,c){return r.a.createElement("div",{key:c},r.a.createElement("p",null,e.name," ",e.number,r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Do you really want to delete ".concat(e.name))&&h(e.id).then((function(r){var c=Object(b.a)(n),u=n.find((function(n){return n.id===e.id})),s=c.indexOf(u);c.splice(s,1),t(c),o(!0),a("Deleted ".concat(e.name)),setTimeout((function(){return o(!1)}),3e3)})).catch((function(e){console.log("".concat(e," in remove"))}))}(e)}},"Delete")))})))},p=t(4),v=t(16),E=function(e){var n=e.setPersons,t=e.persons,o=e.setMessage,c=e.setErrorMessage,s=e.setShowMessage,i=Object(a.useState)({name:"",number:""}),l=Object(u.a)(i,2),m=l[0],h=l[1],g=function(e){e.persist(),h((function(n){return Object(v.a)({},n,Object(p.a)({},e.target.name,e.target.value))}))};return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:m.name,name:"name",onChange:g})),r.a.createElement("div",null,"phone number: ",r.a.createElement("input",{value:m.number,name:"number",onChange:g})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return function(e){if(e.preventDefault(),void 0!==t.find((function(e){return e.name.toLowerCase()===m.name.toLowerCase()}))){if(!window.confirm("Name ".concat(m.name," is already in the list, replace the old number with a new one?")))return void h({name:"",number:""});var a=t.find((function(e){return e.name.toLowerCase()===m.name.toLowerCase()})),r=a.id,u={name:m.name,number:m.number};d(r,u).then((function(e){var r=Object(b.a)(t),o=r.indexOf(a);r[o]=e,n(r),h({name:"",number:""})})).catch((function(e){"Request failed with status code 404"===e.message&&(s(!0),c("".concat(m.name," is no longer available in the phone book")),setTimeout((function(){return s(!1)}),3e3)),console.log("".concat(e," in update"))})),o("Updated the number of ".concat(m.name))}else{var i={name:m.name,number:m.number};f(i).then((function(e){n(t.concat(e)),h({name:"",number:""}),s(!0),o("Added ".concat(m.name)),setTimeout((function(){return s(!1)}),3e3)})).catch((function(e){console.log("".concat(e," in post"))}))}}(e)},type:"submit"},"add")))},w=function(e){var n=e.setPersons,t=e.persons;return r.a.createElement("form",null,r.a.createElement("div",null,"Filter: ",r.a.createElement("input",{name:"filter",onChange:function(e){var a=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));n(a)}})))},O=function(e){var n=e.message;return r.a.createElement("div",{className:"notification"},n)},j=function(e){var n=e.errorMessage;return r.a.createElement("div",{className:"errorNotification"},n)},M=(t(40),function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(null),s=Object(u.a)(c,2),i=s[0],l=s[1],f=Object(a.useState)(!1),d=Object(u.a)(f,2),h=d[0],b=d[1],p=Object(a.useState)(null),v=Object(u.a)(p,2),M=v[0],C=v[1];return Object(a.useEffect)((function(){m().then((function(e){o(e)})).catch((function(e){console.log("".concat(e," in get"))}))}),[]),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phone book"),h&&null!==i&&null===M&&r.a.createElement(O,{message:i}),h&&null!==M&&r.a.createElement(j,{errorMessage:M}),r.a.createElement(w,{persons:t,setPersons:o}),r.a.createElement("h3",null,"Add new"),r.a.createElement(E,{persons:t,setPersons:o,setMessage:l,setErrorMessage:C,setShowMessage:b}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(g,{persons:t,setPersons:o,setMessage:l,setShowMessage:b})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.f8bb5d60.chunk.js.map